# Documentation

This wrapper polish a nanopore assembly using **Medaka**.

The result is a polished assembly.

**Required input:**

- **assembly**: the input assembly fasta file.
- **fastq**: the input fastq files.

**Required output::**

- **output**: the polished assembly fasta file.
 
**Required parameters:**

- **model**: models that can be found by running `medaka tools list_models`
- **options**: a list of valid medaka options.

**Log:**

- a log file generated by medaka is created.

**Threads:**

It is not recommended to specify a value of --threads greater than 2 for medaka consensus since the compute scaling efficiency is poor beyond this.
Note also that medaka consensus may be seen to use resources equivalent to <threads> + 4 as an additional 4 threads are used for reading and preparing input data.

# Configuration


    ##############################################################################
    # Medaka consensus
    #
    # :Parameters:
    #
    # - model: models that can be found by running `medaka tools list_models`
    # - options: any options recognised by medaka_consensus cli.
    # - threads: number of threads to be used.
    #
    medaka_consensus:
        model: "r941_min_fast_g303"
        options:
        threads: 6


# Example

    rule medaka_consensus:
        input:
            fastq="data/raw.fastq.gz",
            assembly="assembly/contigs.fasta"
        output:
            assembly="polished/contigs.polish.fasta"
        params:
            model=config["medaka_consensus"]["model"]
        log:
            "logs/medaka.log"
        threads:
            config["medaka_consensus"]["threads"]
        wrapper:
            "main/wrappers/medaka/consensus"
