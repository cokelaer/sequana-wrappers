# Documentation

Variant filter rules dedicated to VCF files generated by freebayes.
It filters with freebayes quality score, coverage depth, frequency and
strand ratio.

**Required input:**

- **vcf**: VCF file from freebayes.

**Required output:**

- **vcf**: Filtered VCF file.
- **csv**: CSV file of filtered variants.
- **html**: HTML report. Note that the output is always called "variant_calling.html"
  If you want to save the file in a specific directory, use report_dir parameter

**Required parameters:**

- **report_dir**: Report directory to copy JS/CSS.
- **filter_dict**: A dictionnary of filtering parameters (freebayes score, frequency
minimum depth, forward and reverse depth, and strand ratio).

# Configuration

	######################################################################
	# Freebayes vcf filter section
	#
	# :Parameters:
	#
    freebayes_vcf_filter:
        freebayes_score: 20
        frequency: 0.7
        min_depth: 10
        forward_depth: 3
        reverse_depth: 3
        strand_ratio: 0.2

# Example

    rule freebayes_vcf_filter:
        input:
            vcf = "{sample}/freebayes/{sample}.vcf",
        output:
            vcf = "{sample}/freebayes_vcf_filter/{sample}.filter.vcf",
            csv = "{sample}/freebayes_vcf_filter/{sample}.filter.csv",
            html = "{sample}/freebayes_vcf_filter/report/{sample}_variant_calling.html"
        params:
           filter_dict= {
               "freebayes_score": config["freebayes_vcf_filter"]["freebayes_score"],
               "frequency": config["freebayes_vcf_filter"]["frequency"],
               "min_depth": config["freebayes_vcf_filter"]["min_depth"],
               "forward_depth": config["freebayes_vcf_filter"]["forward_depth"],
               "reverse_depth": config["freebayes_vcf_filter"]["reverse_depth"],
               "strand_ratio": config["freebayes_vcf_filter"]["strand_ration"],
           }
           report_dir="report"
       wrapper:
           "main/wrappers/freebayes_vcf_filter"
