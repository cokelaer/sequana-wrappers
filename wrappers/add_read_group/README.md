# Documentation

This wrapper adds a read group in an input BAM file. 
several standard read tags are handled by this wrapper but any other can be added using
the *options* parameter. See the note below for details.


**Required input:**

- BAM file

**Required output:**

- The first output must be the expected output BAM file with the 
  read group added.
- (optional): although not required, you may specify the 
  indexed BAM file in the output as a second argument, 
  which is generated by the wrapper. The index is built with samtools.

**Log:**

- a log file with stdout/stderr

**Notes:**

If not provided, PL is set to 'Illumina', PU is set to 'unknown' and
LB is set to 'unknown'. If not provided, SM is set to the input BAM file
filename (without .bam extension). You can also use wildcards.

Finally, if any of those options are provided in the options field, they will
replace the other fields.

# Configuration

    add_read_group:
        options:    # result filters options
        # PL:   (automatically filled with Illumina)
        # PU:   (automatically filled with unknown)
        # LB:   (automatically filled with unknown)
        # SM:   (automatically filled with sample name from 
                 input file. e.g. file.sorted.bam returns 'file')
        # ID    (automatically set to a unique uuid)


# Example


    rule add_read_group:
        input:
            "test.bam"
        output:
            bam="test.rg.bam",
            bai="test.rg.bam.bai"
        log:
            "log.out"
        params:
            ID="1",
            LB="lib",
            PL="ILLUMINA",
            PU="unit",
            SM="test",
            options=""
        wrapper:
            "main/wrappers/add_read_group"

A simpler example:

    rule add_read_group:
        input:
            "{sample}.bam"
        output:
            bam="{sample}.rg.bam",
        log:
            "log.out"
        params:
            SM="{sample}
        wrapper:
            "main/wrappers/add_read_group"





